<h4>
  <% if params[:favorite_id].present? %>
    お気に入り一覧
  <% elsif params[:keyword].present? %>
    検索結果
  <% else %>
    タイムライン
  <% end %>
</h4>

<%= render 'list', posts:@posts %>

<div class="modal-open">絞り込み</div>

<div class="modal-container">
  <div class="modal-body">
    <div class="modal-close">×</div>
    <div class="modal-content">
     <h4 class="modal-title" id="myModalLabel">絞り込み条件を選択</h4>
      <div class='form-group'>
        <%= form_with url: search_posts_path, local: true, method: :get do |f| %>
        
          <% Post.select(:shop_large_area).distinct.all.each do |post| %>
            <label>
              <%= f.check_box :area_names, {multiple: true}, post.shop_large_area, nil %>
              <%= post.shop_large_area %>
            </label>
          <% end %>
          <% @tag_genres.each do |tag_genre| %>
            <%= tag_genre.name %>
            <%= f.collection_check_boxes(:tag_ids, Tag.where(tag_genre_id: tag_genre.id), :id, :name) do |tag| %>
              <%= tag.check_box%><%= tag.text %>
            <% end %>
          <% end %>

          <%= f.submit "検索" %>
        <% end %>
      </div>
    </div>
  </div>
</div>
<%= link_to new_post_path do %>
  <i class="fixed_btn fas fa-plus-circle"></i>
<% end %>
<script>
  $(function(){
  // 変数に要素を入れる
  var open = $('.modal-open'),
    close = $('.modal-close'),
    container = $('.modal-container');
  
  //開くボタンをクリックしたらモーダルを表示する
  open.on('click',function(){ 
    container.addClass('active');
    return false;
  });
  
  //閉じるボタンをクリックしたらモーダルを閉じる
  close.on('click',function(){  
    container.removeClass('active');
  });
  
  //モーダルの外側をクリックしたらモーダルを閉じる
  $(document).on('click',function(e) {
    if(!$(e.target).closest('.modal-body').length) {
      container.removeClass('active');
    }
  });
});
</script>